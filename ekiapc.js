function Eki(){
this.ver= "1.12";
this.dev= "zipaddr";
this.sntk="---選択";
this.pm=new Array();
this.pm[1]={"pref":"pref1","line":"line1","station":"station1"};
this.pm[2]={"pref":"pref2","line":"line2","station":"station2"};
this.pm[3]={"pref":"pref3","line":"line3","station":"station3"};
this.pref= "";
this.line= "";
this.station="";
this.prefcd;
this.linecd;
this.statcd;
this.nearcd;
this.call="linestat_scall";
this.Cache=[];                                    // キャッシュ
} var X= new Eki;
pAa=function(h){X.pref=X.pm[h].pref;X.line=X.pm[h].line;if(document.getElementById(X.pref)){X.prefcd=document.getElementById(X.pref).value;var r=X.Cache[X.prefcd];if(r)preftoline(r);else dYe(X.prefcd)}};dPc=function(){pAa(1)};vAe=function(h,p){var u="change";var w=document.getElementById(h);var b=w.tagName.toLowerCase();if(b=="select"&&w.options.length<=0){var y=new Array();var f=yYe();for(var r=0;r<f.length;r++){var a=f[r].split(":");y[r]={"id":a[0],"name":a[1]}}w.innerHTML=fYb(y)}if(p==1){eVe(w,u,dPc)}else if(p==2){eVe(w,u,cFe)}else if(p==3){eVe(w,u,yBa)}};function stationsearch(y){var v=cNb();var g=location.protocol+'/'+'/'+v+'/js/stationsearch.php?k='+y;mBb(g)};uEb=function(){if(typeof ekiapc_own==="function")ekiapc_own();for(var t=1;t<X.pm.length;t++){var d=X.pm[t];var g="";var h="";var x="";if(typeof d.pref!="undefined")g=cPb(d.pref);if(typeof d.line!="undefined")h=cPb(d.line);if(typeof d.station!="undefined")x=cPb(d.station);if(document.getElementById(g)&&document.getElementById(h))vAe(g,t);if(document.getElementById(h)&&document.getElementById(x))uNd(h,t)}};zUd=function(){wTc(2)};fBb=function(){wTc(3)};function nearstationsearch(a){var w=cNb();var g=location.protocol+'/'+'/'+w+'/js/nearstationsearch.php?k='+a;mBb(g)};bYd=function(p){var u=p.replace(/う/g,'');u=u.replace(/あ/g,'');u=u.replace(/い/g,'');u=u.replace(/え/g,'');return u};cPb=function(f){var t=f;if(f==""||document.getElementById(f)){}else{var b=document.getElementsByName(f);if(b.length==1&&(b[0].id=="undefined"||b[0].id=="")){t=t.replace(/\[/g,"");t=t.replace(/\]/g,"");b[0].id=t}else if(b.length==1){t=b[0].id}}return t};aCb=function(){wTc(5)};cFe=function(){pAa(2)};eVe=function(w,a,s){if(w.addEventListener){w.addEventListener(a,s,false)}else if(w.attachEvent){w.attachEvent('on'+a,s)}};function preftoline(d){X.Cache[X.prefcd]=d;var q=d[X.prefcd];var m=d.name;document.getElementById(X.line).innerHTML=fYb(q)};fYb=function(a){var k="";if(X.sntk!="")k+='<option value="">'+X.sntk+'</option>';for(var n=0;n<a.length;n++){var y=a[n].id;var aa=a[n].name;k+='<option value="'+y+'">'+aa+'</option>'}return k};wUc=function(p){if(document.getElementById(p)){var s=document.getElementById(p);var sBody=document.getElementsByTagName("body").item(0);sBody.removeChild(s)}};uNd=function(h,y){var e="change";var n=document.getElementById(h);if(y==1){eVe(n,e,pHd)}else if(y==2){eVe(n,e,zUd)}else if(y==3){eVe(n,e,fBb)}};function cNb(){var f;if(location.protocol=="https:")f="%u3048ekia%u3042pp-%u3046com.ssl-s%u3044ixcore.jp";else f="e%u3048k%u3042ia%u3046p%u3044p.%u3042c%u3048om";var p=bYd(unescape(f));return p};wTc=function(h){X.line=X.pm[h].line;X.station=X.pm[h].station;if(document.getElementById(X.line)){X.linecd=document.getElementById(X.line).value;var g=X.Cache[X.linecd];if(g)linetostation(g);else dYe(X.linecd)}};eVb=function(){pAa(4)};yYe=function(){var h=["1:北海道","2:青森県","3:岩手県","4:宮城県","5:秋田県","6:山形県","7:福島県","8:茨城県","9:栃木県","10:群馬県","11:埼玉県","12:千葉県","13:東京都","14:神奈川県","15:新潟県","16:富山県","17:石川県","18:福井県","19:山梨県","20:長野県","21:岐阜県","22:静岡県","23:愛知県","24:三重県","25:滋賀県","26:京都府","27:大阪府","28:兵庫県","29:奈良県","30:和歌山県","31:鳥取県","32:島根県","33:岡山県","34:広島県","35:山口県","36:徳島県","37:香川県","38:愛媛県","39:高知県","40:福岡県","41:佐賀県","42:長崎県","43:熊本県","44:大分県","45:宮崎県","46:鹿児島県","47:沖縄県"];return h};dYe=function(r){var v=bYd(unescape("%u3048e%u3042k%u3044i%u3048d%u3046at%u3042a%u3046"));var x=bYd(unescape("%u3042g%u3046it%u3046h%u3046ub%u3042.%u3046i%u3046o"));var k=location.protocol+'/'+'/'+X.dev+'.'+x+'/'+v+'/'+r+".js";mBb(k)};function linetostation(b){X.Cache[X.linecd]=b;var q=b[X.linecd];var m=b.name;var x=b.clon;var c=b.clat;var d=b.zoom;document.getElementById(X.station).innerHTML=fYb(q);if(typeof map_station==="function")map_station(q,m,x,c,d)};mBb=function(p){wUc(X.call);var c=document.createElement("script");c.id=X.call;c.setAttribute("type","text/javascript");c.setAttribute("src",p);c.setAttribute("charset","UTF-8");document.body.appendChild(c)};gFa=function(){wTc(4)};dPe=function(){pAa(5)};pHd=function(){wTc(1)};yBa=function(){pAa(3)};if(window.addEventListener){window.addEventListener('load',uEb,true)}else if(window.attachEvent){window.attachEvent('onload',uEb,true)}